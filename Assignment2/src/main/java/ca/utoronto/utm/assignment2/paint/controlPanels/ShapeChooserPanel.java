package ca.utoronto.utm.assignment2.paint.controlPanels;

import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.geometry.Insets;
import javafx.scene.layout.GridPane;

/**
 * ShapeChooserPanel is a control panel in a painting application that enables users to select different shapes
 * to draw on the canvas. It contains buttons for each shape type, represented by SVG icons, and only one shape
 * can be selected at a time.
 *
 * ShapeChooserPanel implements EventHandler<ActionEvent> to handle button clicks and ensure that only one button
 * remains selected at any time. The selected shape determines the drawing mode in the application.
 *
 * Dependencies:
 * - ShapeChooserPanelButton: A custom button class representing a shape with an SVG icon and command.
 *
 * @see ShapeChooserPanelButton
 *
 * Author: Ethan
 */
public class ShapeChooserPanel extends GridPane implements EventHandler<ActionEvent> {

    public ShapeChooserPanel() {

        // adding gap between elements
        this.setVgap(10.0);
        this.setPadding(new Insets(10.0));
        getStyleClass().add("shape-chooser-panel");

        int row = 0;
        // Ethan: using buttonLabels as mode breaks the code
        String[] svgs= {
                "M468-240q-96-5-162-74t-66-166q0-100 70-170t170-70q97 0 166 66t74 162l-84-25q-13-54-56-88.5T480-640q-66 0-113 47t-47 113q0 57 34.5 100t88.5 56l25 84ZM821-60 650-231 600-80 480-480l400 120-151 50 171 171-79 79Z",
                "M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z",
                "M28.857 18c-0.8 5.65-5.227 10.125-10.857 10.997v1.003h-4v-1.003c-5.63-0.871-10.057-5.347-10.858-10.997h-1.142v-4h1.188c0.924-5.493 5.293-9.81 10.812-10.664v-1.336h4v1.336c5.52 0.854 9.887 5.171 10.812 10.664h1.188v4h-1.143zM15 29h2v-2h-2v2zM3 15v2h2v-2h-2zM17 3h-2v2h2v-2zM18 4.852v1.148h-4v-1.148c-4.69 0.824-8.401 4.483-9.292 9.148h1.292v4h-1.346c0.775 4.822 4.545 8.638 9.346 9.481v-1.481h4v1.481c4.801-0.844 8.571-4.659 9.346-9.481h-1.346v-4h1.292c-0.892-4.665-4.602-8.324-9.292-9.148zM29 15h-2v2h2v-2z",
                "M120-120v-720h720v720H120Zm80-80h560v-560H200v560Zm0 0v-560 560Z",
                "M260.021,65.636c4.143,0,7.5-3.358,7.5-7.5v-50c0-4.142-3.357-7.5-7.5-7.5h-50 c-4.143,0-7.5,3.358-7.5,7.5v17.5H65v-17.5c0-4.142-3.357-7.5-7.5-7.5h-50c-4.143,0-7.5,3.358-7.5,7.5v50c0,4.142,3.357,7.5,7.5,7.5 H25v136.25H7.5c-4.143,0-7.5,3.358-7.5,7.5v50c0,4.142,3.357,7.5,7.5,7.5h50c4.143,0,7.5-3.358,7.5-7.5v-17.5h137.521v17.5 c0,4.142,3.357,7.5,7.5,7.5h50c4.143,0,7.5-3.358,7.5-7.5v-50c0-4.142-3.357-7.5-7.5-7.5h-17.5V65.636H260.021z M217.521,15.636h35 v35h-35V15.636z M15,15.636h35v35H15V15.636z M50,251.886H15v-35h35V251.886z M252.521,251.886h-35v-35h35V251.886z M227.521,201.886h-17.5c-4.143,0-7.5,3.358-7.5,7.5v17.5H65v-17.5c0-4.142-3.357-7.5-7.5-7.5H40V65.636h17.5 c4.143,0,7.5-3.358,7.5-7.5v-17.5h137.521v17.5c0,4.142,3.357,7.5,7.5,7.5h17.5V201.886z",
                "M12.0001 3.75317L21.5509 20.2501H2.44922L12.0001 3.75317ZM5.05089 18.7501H18.9492L12.0001 6.74697L5.05089 18.7501Z",
                "M21.59,9.17l-9-6.54a1,1,0,0,0-1.18,0l-9,6.54a1,1,0,0,0-.36,1.12L5.49,20.87a1,1,0,0,0,1,.69H17.56a1,1,0,0,0,1-.69L22,10.29A1,1,0,0,0,21.59,9.17ZM16.84,19.56H7.16l-3-9.2L12,4.68l7.82,5.68Z",
                "M554-120q-54 0-91-37t-37-89q0-76 61.5-137.5T641-460q-3-36-18-54.5T582-533q-30 0-65 25t-83 82q-78 93-114.5 121T241-277q-51 0-86-38t-35-92q0-54 23.5-110.5T223-653q19-26 28-44t9-29q0-7-2.5-10.5T250-740q-10 0-25 12.5T190-689l-70-71q32-39 65-59.5t65-20.5q46 0 78 32t32 80q0 29-15 64t-50 84q-38 54-56.5 95T220-413q0 17 5.5 26.5T241-377q10 0 17.5-5.5T286-409q13-14 31-34.5t44-50.5q63-75 114-107t107-32q67 0 110 45t49 123h99v100h-99q-8 112-58.5 178.5T554-120Zm2-100q32 0 54-36.5T640-358q-46 11-80 43.5T526-250q0 14 8 22t22 8Z",
                "M29.969,8.608c-0.061-0.219-0.207-0.41-0.402-0.524c-0.052-0.031-0.109-0.05-0.166-0.069 c-0.205-0.182-0.412-0.363-0.61-0.551c-0.225-0.215-0.439-0.439-0.664-0.652c-0.24-0.229-0.473-0.465-0.709-0.699 c-0.236-0.234-0.487-0.455-0.739-0.676c-0.522-0.457-1.013-0.95-1.527-1.417c-0.554-0.502-1.088-1.027-1.637-1.533 c-0.109-0.1-0.24-0.158-0.375-0.195c-0.008-0.008-0.01-0.019-0.018-0.028c-0.157-0.157-0.384-0.243-0.608-0.243 c-0.213,0-0.425,0.077-0.573,0.243c-0.597,0.666-1.21,1.308-1.872,1.907c-0.605,0.548-1.222,1.086-1.836,1.622 c-1.222,1.064-2.382,2.205-3.509,3.365c-1.076,1.107-2.193,2.171-3.306,3.239c-0.56,0.538-1.099,1.094-1.683,1.606 c-0.276,0.242-0.558,0.483-0.833,0.725c-0.264,0.23-0.51,0.485-0.755,0.733c-0.355,0.363-0.715,0.723-1.092,1.06 c-0.172,0.155-0.228,0.383-0.204,0.604c-0.057,0.184-0.062,0.385,0.011,0.559c0.019,0.23,0.04,0.459,0.047,0.688 c0.006,0.224,0.017,0.454,0,0.679c-0.079,0.373-0.195,0.742-0.332,1.099c-0.159,0.34-0.356,0.661-0.543,0.986 c-0.173,0.302-0.368,0.593-0.581,0.871c0.011-0.014,0.022-0.028,0.033-0.042c-0.104,0.144-0.172,0.287-0.172,0.481 c0,0.138,0.049,0.267,0.117,0.385c-0.074,0.288-0.028,0.61,0.204,0.809c0.033,0.028,0.066,0.058,0.099,0.086 c-0.263,0.316-0.527,0.63-0.786,0.949c-0.355,0.433-0.692,0.881-1.054,1.308c-0.209,0.244-0.418,0.483-0.613,0.737 c-0.116,0.15-0.217,0.309-0.323,0.465c-0.205,0.294-0.39,0.603-0.595,0.898c-0.066,0.094-0.092,0.205-0.101,0.318 C2.102,28.558,2,28.772,2,28.999c0,0.461,0.38,0.83,0.837,0.835c1.042,0.018,2.087,0.051,3.131,0.042 c0.862-0.008,1.731-0.024,2.589,0.072c0.033,0.005,0.064,0.008,0.096,0.011c0.004,0.001,0.009,0.001,0.013,0.002 c-0.003,0-0.007-0.001-0.01-0.001c0.067,0.006,0.13,0.003,0.193-0.003c0.289,0.062,0.602-0.001,0.824-0.223 c0.465-0.465,0.929-0.93,1.387-1.402c0.062,0.085,0.123,0.172,0.216,0.226c0.255,0.15,0.551,0.115,0.786-0.025 c0.143-0.034,0.279-0.092,0.386-0.203c0.203-0.211,0.416-0.41,0.625-0.611c0.166-0.159,0.328-0.322,0.505-0.469 c0.445-0.329,0.914-0.619,1.415-0.854c0.243-0.092,0.487-0.167,0.742-0.217c0.034-0.002,0.067-0.004,0.101-0.004 c0.341,0.075,0.667,0.19,0.989,0.322c0.191,0.079,0.459,0.018,0.63-0.083c0.11-0.064,0.195-0.159,0.264-0.265 c0.011-0.01,0.027-0.014,0.038-0.025c0.018-0.018,0.025-0.043,0.041-0.062c0.032-0.024,0.075-0.037,0.099-0.067 c0.072-0.087,0.138-0.177,0.205-0.265c0.403-0.522,0.764-1.074,1.161-1.601c0.254-0.323,0.517-0.637,0.761-0.967 c0.248-0.335,0.495-0.67,0.747-1.003c0.512-0.672,0.995-1.367,1.497-2.049c0.52-0.709,1.038-1.423,1.553-2.138 c0.489-0.678,0.95-1.373,1.407-2.071c0.709-1.082,1.47-2.128,2.23-3.172c0.4-0.55,0.778-1.117,1.166-1.677 c0.41-0.595,0.837-1.178,1.255-1.767C30.01,9.1,30.026,8.818,29.969,8.608z M6.018,28.339c-0.607-0.031-1.212-0.07-1.817-0.107 c0.123-0.177,0.245-0.354,0.374-0.526c0.189-0.233,0.395-0.45,0.587-0.679c0.231-0.276,0.445-0.566,0.67-0.847 c0.37-0.466,0.765-0.91,1.163-1.354c0.025,0.022,0.05,0.043,0.074,0.065c0.461,0.412,0.94,0.804,1.413,1.204 c0.393,0.33,0.778,0.668,1.164,1.007c-0.415,0.436-0.833,0.872-1.216,1.334c-0.351-0.024-0.701-0.048-1.052-0.057 C6.924,28.369,6.469,28.363,6.018,28.339z M13.663,25.312c-0.213,0.114-0.414,0.254-0.617,0.388 c-0.187,0.124-0.374,0.248-0.554,0.386c-0.301,0.231-0.579,0.491-0.862,0.746c-0.283-0.24-0.568-0.479-0.843-0.728 c-0.416-0.376-0.841-0.743-1.263-1.113c-0.883-0.775-1.682-1.636-2.551-2.427c0.168-0.233,0.338-0.465,0.492-0.706 c0.264-0.416,0.52-0.849,0.69-1.312c0.077-0.211,0.146-0.427,0.207-0.644c0.074-0.258,0.13-0.517,0.152-0.781 c0.153,0.122,0.307,0.241,0.458,0.366c0.321,0.266,0.633,0.544,0.948,0.814c0.313,0.27,0.634,0.526,0.95,0.792 c0.634,0.542,1.253,1.103,1.89,1.641c0.644,0.548,1.269,1.119,1.89,1.694c0.117,0.108,0.23,0.217,0.344,0.327 C14.528,24.882,14.083,25.083,13.663,25.312z M26.909,10.7c-0.459,0.747-0.993,1.448-1.492,2.167 c-0.487,0.702-0.967,1.405-1.442,2.114c-0.221,0.333-0.433,0.67-0.654,1.001c-0.24,0.359-0.491,0.709-0.743,1.06 c-0.656,0.918-1.324,1.828-1.966,2.756c-0.315,0.455-0.63,0.904-0.962,1.348c-0.326,0.434-0.639,0.88-0.967,1.315 c-0.159,0.2-0.322,0.398-0.477,0.6c-0.171,0.223-0.335,0.453-0.499,0.68c-0.164,0.226-0.325,0.453-0.488,0.678 c-0.182-0.156-0.363-0.313-0.543-0.469c-0.299-0.26-0.603-0.512-0.902-0.772c-0.638-0.554-1.263-1.121-1.917-1.659 c-1.279-1.05-2.54-2.126-3.82-3.178c-0.489-0.402-0.974-0.81-1.457-1.219c0.262-0.258,0.526-0.516,0.783-0.778 c0.514-0.52,1.064-0.995,1.608-1.482c0.581-0.518,1.135-1.074,1.695-1.618c0.536-0.522,1.068-1.048,1.594-1.578 c0.579-0.585,1.172-1.161,1.756-1.744c0.548-0.55,1.119-1.074,1.687-1.604c0.601-0.563,1.208-1.117,1.832-1.653 c0.64-0.546,1.289-1.084,1.939-1.62c0.418-0.344,0.803-0.722,1.178-1.109c0.459,0.403,0.917,0.806,1.386,1.198 c0.534,0.445,1.034,0.928,1.533,1.413c0.238,0.233,0.491,0.451,0.735,0.68c0.24,0.227,0.483,0.455,0.725,0.68 c0.229,0.211,0.451,0.43,0.682,0.636c0.117,0.107,0.236,0.212,0.357,0.316C27.67,9.466,27.288,10.082,26.909,10.7z M22.423,15.018 c-0.404,0.591-0.833,1.16-1.251,1.744c-0.205,0.286-0.408,0.575-0.619,0.859c-0.191,0.26-0.392,0.514-0.579,0.778 c-0.38,0.534-0.723,1.094-1.096,1.633c-0.37,0.538-0.743,1.078-1.139,1.598c-0.112,0.148-0.221,0.262-0.41,0.315 c-0.177,0.047-0.37,0.024-0.528-0.069c-0.154-0.091-0.268-0.24-0.315-0.412c-0.045-0.158-0.037-0.39,0.069-0.528 c0.41-0.536,0.806-1.088,1.18-1.649c0.357-0.532,0.684-1.08,1.064-1.596c0.818-1.113,1.566-2.278,2.329-3.432 c0.152-0.229,0.4-0.369,0.658-0.369c0.123,0,0.249,0.032,0.369,0.101C22.489,14.186,22.656,14.679,22.423,15.018z",
                "M600-80v-100L320-320H120v-240h172l108-124v-196h240v240H468L360-516v126l240 120v-50h240v240H600ZM480-720h80v-80h-80v80ZM200-400h80v-80h-80v80Zm480 240h80v-80h-80v80ZM520-760ZM240-440Zm480 240Z",
                "M690-240h190v80H610l80-80Zm-500 80-85-85q-23-23-23.5-57t22.5-58l440-456q23-24 56.5-24t56.5 23l199 199q23 23 23 57t-23 57L520-160H190Zm296-80 314-322-198-198-442 456 64 64h262Zm-6-240Z",
                "M2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C22 4.92893 22 7.28595 22 12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12Z M7.67004 11.6064L8.20037 12.1367L7.67004 11.6064ZM6 13.9682H5.25H6ZM10.0318 18V18.75V18ZM11.6064 7.67004L11.076 7.13971L11.6064 7.67004ZM12.6506 16.073C12.9435 16.3659 13.4183 16.3659 13.7112 16.073C14.0041 15.7801 14.0041 15.3053 13.7112 15.0124L12.6506 16.073ZM8.98764 10.2888C8.69474 9.99588 8.21987 9.99588 7.92698 10.2888C7.63408 10.5817 7.63408 11.0565 7.92698 11.3494L8.98764 10.2888ZM15.7996 11.8633L11.8633 15.7996L12.924 16.8603L16.8603 12.924L15.7996 11.8633ZM8.20037 12.1367L12.1367 8.20037L11.076 7.13971L7.13971 11.076L8.20037 12.1367ZM8.20037 15.7996C7.6287 15.228 7.25442 14.8514 7.01378 14.536C6.78634 14.2379 6.75 14.0841 6.75 13.9682H5.25C5.25 14.544 5.492 15.0144 5.82124 15.4459C6.13728 15.8601 6.59802 16.3186 7.13971 16.8603L8.20037 15.7996ZM7.13971 11.076C6.59802 11.6177 6.13728 12.0762 5.82124 12.4904C5.492 12.922 5.25 13.3924 5.25 13.9682H6.75C6.75 13.8522 6.78634 13.6984 7.01378 13.4003C7.25442 13.0849 7.6287 12.7084 8.20037 12.1367L7.13971 11.076ZM11.8633 15.7996C11.2916 16.3713 10.9151 16.7456 10.5997 16.9862C10.3016 17.2137 10.1478 17.25 10.0318 17.25V18.75C10.6076 18.75 11.078 18.508 11.5096 18.1788C11.9238 17.8627 12.3823 17.402 12.924 16.8603L11.8633 15.7996ZM7.13971 16.8603C7.6814 17.402 8.13989 17.8627 8.55411 18.1788C8.98563 18.508 9.45604 18.75 10.0318 18.75V17.25C9.91588 17.25 9.76207 17.2137 9.46398 16.9862C9.14858 16.7456 8.77204 16.3713 8.20037 15.7996L7.13971 16.8603ZM15.7996 8.20037C16.3713 8.77204 16.7456 9.14858 16.9862 9.46398C17.2137 9.76207 17.25 9.91588 17.25 10.0318H18.75C18.75 9.45604 18.508 8.98563 18.1788 8.55411C17.8627 8.13989 17.402 7.6814 16.8603 7.13971L15.7996 8.20037ZM16.8603 12.924C17.402 12.3823 17.8627 11.9238 18.1788 11.5096C18.508 11.078 18.75 10.6076 18.75 10.0318H17.25C17.25 10.1478 17.2137 10.3016 16.9862 10.5997C16.7456 10.9151 16.3713 11.2916 15.7996 11.8633L16.8603 12.924ZM16.8603 7.13971C16.3186 6.59802 15.8601 6.13728 15.4459 5.82124C15.0144 5.492 14.544 5.25 13.9682 5.25V6.75C14.0841 6.75 14.2379 6.78634 14.536 7.01378C14.8514 7.25442 15.228 7.6287 15.7996 8.20037L16.8603 7.13971ZM12.1367 8.20037C12.7084 7.6287 13.0849 7.25442 13.4003 7.01378C13.6984 6.78634 13.8522 6.75 13.9682 6.75V5.25C13.3924 5.25 12.922 5.492 12.4904 5.82124C12.0762 6.13728 11.6177 6.59802 11.076 7.13971L12.1367 8.20037ZM13.7112 15.0124L8.98764 10.2888L7.92698 11.3494L12.6506 16.073L13.7112 15.0124Z",
                "M10.077,2.61445 C10.414725,1.8547065 11.4559488,1.8167103 11.8639379,2.50048712 L11.9229,2.61445 L12.9649,4.95885 C13.8758895,7.00850053 15.3902729,8.72789543 17.3016897,9.89018275 L17.6239,10.0787 L19.4747,11.1197 C20.1230611,11.4844444 20.1590812,12.3862472 19.5827602,12.8105806 L19.4747,12.8803 L17.6239,13.9214 C15.6690053,15.0210105 14.0996795,16.6904482 13.1222832,18.702691 L12.9649,19.0412 L11.9229,21.3856 C11.58527,22.145315 10.544051,22.1833008 10.1359764,21.4995572 L10.077,21.3856 L9.03507,19.0412 C8.12411842,16.9915684 6.60968319,15.2721296 4.69823529,14.1099057 L4.37602,13.9214 L2.52521,12.8803 C1.87690556,12.51565 1.84087972,11.6138525 2.41715777,11.1894352 L2.52521,11.1197 L4.37602,10.0787 C6.33094316,8.97901368 7.90032427,7.3096169 8.87769233,5.2973616 L9.03507,4.95885 L10.077,2.61445 Z M11,5.46224 C9.75577,8.26169 7.71421,10.4956 5.03971,12 C7.71421,13.5044 9.75577,15.7384 11,18.5378 C12.2475,15.7308 14.29,13.5021 16.9602,12 C14.2857,10.4956 12.2442,8.26169 11,5.46224 Z M19.2205,2.12106 C19.719,3.24286 20.5603,4.19019 21.6347,4.79454 C21.7949,4.88467 21.7949,5.11536 21.6347,5.20549 C20.5603,5.80984 19.719,6.75718 19.2205,7.87897 C19.1356,8.07 18.8644,8.07 18.7795,7.87897 C18.281,6.75717 17.4397,5.80984 16.3653,5.20549 C16.2051,5.11536 16.2051,4.88467 16.3653,4.79454 C17.4397,4.1902 18.281,3.24286 18.7795,2.12106 C18.8644,1.93003 19.1356,1.93003 19.2205,2.12106 Z",
                "M280-160v-520H80v-120h520v120H400v520H280Zm360 0v-320H520v-120h360v120H760v320H640Z"
        };
        String[] commands = {"Select", "Circle", "Oval", "Square", "Rectangle", "Triangle", "Polygon", "Squiggle", "HighLighter", "Polyline", "PrecisionEraser", "ObjectEraser", "SmartShape", "Text"};
        for (int i = 0; i < commands.length; i++) {
            ShapeChooserPanelButton button = new ShapeChooserPanelButton(svgs[i], commands[i]);
            if (commands[i].equals("Select")) button.setSelected(true);
            this.add(button, 0, row);
            row++;
            button.setOnAction(this);
        }
    }

    @Override
    public void handle(ActionEvent event) {
        ShapeChooserPanelButton source = (ShapeChooserPanelButton) event.getSource();
        for (Object o: this.getChildren()) {
            ShapeChooserPanelButton button = (ShapeChooserPanelButton) o;
            button.setSelected(button.equals(source));
        }
    }

    /**
     * Returns the command (mode) of the currently selected shape.
     *
     * @return A string representing the current drawing mode (e.g., "Circle", "Square").
     */
    public String getMode() {
        String mode = "Select";
        for (Object o : this.getChildren()) {
            ShapeChooserPanelButton button = (ShapeChooserPanelButton) o;
            if (button.isSelected()) mode = button.getCommand();
        }
        return mode;
    }
}


